local WindUI = {}
WindUI.__index = WindUI

-- Core WindUI Library (from main.lua)
function WindUI.new()
    local self = setmetatable({}, WindUI)
    self.ScreenGui = Instance.new("ScreenGui")
    self.ScreenGui.Parent = game.CoreGui
    self.Windows = {}
    return self
end

function WindUI:CreateWindow(title, size, position)
    local window = Instance.new("Frame")
    window.Size = size or UDim2.new(0, 400, 0, 300)
    window.Position = position or UDim2.new(0.5, -200, 0.5, -150)
    window.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    window.BorderSizePixel = 0
    window.Parent = self.ScreenGui
    window.Active = true
    window.Draggable = true

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 30)
    titleLabel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Text = title or "WindUI Window"
    titleLabel.TextSize = 16
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.Parent = window

    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -30, 0, 0)
    closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Parent = titleLabel
    closeButton.MouseButton1Click:Connect(function()
        window:Destroy()
    end)

    table.insert(self.Windows, window)
    return window
end

function WindUI:CreateButton(parent, text, size, position, callback)
    local button = Instance.new("TextButton")
    button.Size = size or UDim2.new(0, 100, 0, 30)
    button.Position = position or UDim2.new(0, 10, 0, 40)
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Text = text or "Button"
    button.TextSize = 14
    button.Font = Enum.Font.SourceSans
    button.Parent = parent
    button.MouseButton1Click:Connect(callback or function() end)
    return button
end

function WindUI:CreateDropdown(parent, options, size, position, callback)
    local dropdown = Instance.new("Frame")
    dropdown.Size = size or UDim2.new(0, 150, 0, 30)
    dropdown.Position = position or UDim2.new(0, 10, 0, 80)
    dropdown.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    dropdown.Parent = parent

    local selected = Instance.new("TextLabel")
    selected.Size = UDim2.new(1, -30, 1, 0)
    selected.BackgroundTransparency = 1
    selected.TextColor3 = Color3.fromRGB(255, 255, 255)
    selected.Text = options[1] or "Select"
    selected.TextSize = 14
    selected.Font = Enum.Font.SourceSans
    selected.Parent = dropdown

    local toggle = Instance.new("TextButton")
    toggle.Size = UDim2.new(0, 30, 1, 0)
    toggle.Position = UDim2.new(1, -30, 0, 0)
    toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    toggle.Text = "v"
    toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggle.Parent = dropdown

    local listFrame = Instance.new("Frame")
    listFrame.Size = UDim2.new(1, 0, 0, #options * 30)
    listFrame.Position = UDim2.new(0, 0, 1, 0)
    listFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    listFrame.Visible = false
    listFrame.Parent = dropdown

    for i, option in ipairs(options) do
        local optButton = Instance.new("TextButton")
        optButton.Size = UDim2.new(1, 0, 0, 30)
        optButton.Position = UDim2.new(0, 0, 0, (i-1)*30)
        optButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        optButton.Text = option
        optButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        optButton.TextSize = 14
        optButton.Parent = listFrame
        optButton.MouseButton1Click:Connect(function()
            selected.Text = option
            listFrame.Visible = false
            if callback then callback(option) end
        end)
    end

    toggle.MouseButton1Click:Connect(function()
        listFrame.Visible = not listFrame.Visible
    end)

    return dropdown
end

function WindUI:Notify(message, duration)
    local notification = Instance.new("Frame")
    notification.Size = UDim2.new(0, 200, 0, 50)
    notification.Position = UDim2.new(1, -210, 1, -60)
    notification.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    notification.Parent = self.ScreenGui

    local text = Instance.new("TextLabel")
    text.Size = UDim2.new(1, 0, 1, 0)
    text.BackgroundTransparency = 1
    text.TextColor3 = Color3.fromRGB(255, 255, 255)
    text.Text = message or "Notification"
    text.TextSize = 14
    text.Font = Enum.Font.SourceSans
    text.Parent = notification

    spawn(function()
        wait(duration or 3)
        notification:Destroy()
    end)
end

function WindUI:CreateDialog(title, message, buttons)
    local dialog = Instance.new("Frame")
    dialog.Size = UDim2.new(0, 300, 0, 150)
    dialog.Position = UDim2.new(0.5, -150, 0.5, -75)
    dialog.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    dialog.Parent = self.ScreenGui

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 30)
    titleLabel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Text = title or "Dialog"
    titleLabel.TextSize = 16
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.Parent = dialog

    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(1, -20, 0, 60)
    messageLabel.Position = UDim2.new(0, 10, 0, 40)
    messageLabel.BackgroundTransparency = 1
    messageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    messageLabel.Text = message or "Message"
    messageLabel.TextSize = 14
    messageLabel.Font = Enum.Font.SourceSans
    messageLabel.TextWrapped = true
    messageLabel.Parent = dialog

    for i, btn in ipairs(buttons or {{"OK", function() dialog:Destroy() end}}) do
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0, 80, 0, 30)
        button.Position = UDim2.new(0, 10 + (i-1)*90, 1, -40)
        button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.Text = btn[1]
        button.TextSize = 14
        button.Parent = dialog
        button.MouseButton1Click:Connect(btn[2])
    end

    return dialog
end

-- Example Usage (inspired by Example.lua)
local ui = WindUI.new()

-- Create a main window
local mainWindow = ui:CreateWindow("My Script Hub", UDim2.new(0, 400, 0, 300))

-- Add a button
ui:CreateButton(mainWindow, "Click Me!", UDim2.new(0, 100, 0, 30), UDim2.new(0, 10, 0, 40), function()
    ui:Notify("Button clicked!", 3)
end)

-- Add a dropdown
ui:CreateDropdown(mainWindow, {"Option 1", "Option 2", "Option 3"}, UDim2.new(0, 150, 0, 30), UDim2.new(0, 10, 0, 80), function(selected)
    ui:Notify("Selected: " .. selected, 3)
end)

-- Show a dialog
ui:CreateDialog("Welcome", "Welcome to WindUI!", {
    {"OK", function() end},
    {"Cancel", function() ui:Notify("Dialog cancelled", 3) end}
})

-- Notification on load
ui:Notify("WindUI Loaded!", 5)
